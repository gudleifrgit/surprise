<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>tg test</title>
<body style="margin:0;background:#000;color:#0f0;font:16px/1.5 system-ui;padding:16px">
<pre id="out">init…</pre>
<button id="btn" style="padding:12px 16px;border:1px solid #0f0;background:#001;color:#0f0;border-radius:10px">sendData()</button>
<script>
const tg = window.Telegram?.WebApp;
const out = document.getElementById('out');
try {
  tg?.ready(); tg?.expand();
  const info = {
    hasTG: !!tg,
    hasSendData: !!tg?.sendData,
    userId: tg?.initDataUnsafe?.user?.id || null,
    bot: tg?.initDataUnsafe?.receiver?.username || null
  };
  out.textContent = JSON.stringify(info, null, 2);
  // авто-пинг
  if (info.hasSendData && info.userId) {
    tg.sendData(JSON.stringify({type:'ping', t:Date.now()}));
  }
} catch(e) { out.textContent = 'error: '+e; }

document.getElementById('btn').onclick = () => {
  tg?.sendData?.(JSON.stringify({type:'ping-click', t:Date.now()}));
};
</script>
